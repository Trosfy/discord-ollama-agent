# Application
DEBUG=false

# Public Hostname (for web UI access via NetBird VPN)
PUBLIC_HOSTNAME=dgx-spark.netbird.cloud

# DynamoDB Local
DYNAMODB_ENDPOINT=http://dynamodb-local:8000
DYNAMODB_REGION=us-east-1
DYNAMODB_ACCESS_KEY=test
DYNAMODB_SECRET_KEY=test

# Auth Service (JWT-based authentication)
JWT_SECRET_KEY=change-me-in-production-use-a-long-random-string
# Note: JWT_EXPIRATION_HOURS is hardcoded to 8 hours in auth-service/app/utils/jwt.py

# Admin Service (Administrative operations microservice)
ADMIN_SERVICE_URL=http://trollama-admin:8003
DISCORD_ADMIN_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN
INTERNAL_API_KEY=generate-64-byte-random-key-for-service-to-service-auth
# To generate INTERNAL_API_KEY: python3 -c "import secrets; print(secrets.token_urlsafe(48))"

# Streamlit UI
FASTAPI_BASE_URL=http://trollama-fastapi:8001
AUTH_SERVICE_URL=http://trollama-auth:8002
COOKIE_SECRET_KEY=change-me-in-production-use-a-long-random-string
LOGGING_HOST=logging-service
LOGGING_PORT=9999
ADMIN_USERS=admin@example.com,admin2@example.com  # Comma-separated list of admin emails

# Ollama
OLLAMA_HOST=http://host.docker.internal:11434
OLLAMA_DEFAULT_MODEL=gpt-oss:20b
OLLAMA_KEEP_ALIVE=0  # Unload models after use (0=immediate, 60=keep 1 min, etc.)

# SGLang Backend Configuration (Optional - 128GB Systems Only)
SGLANG_ENDPOINT=http://sglang-server:30000

# VRAM Management Strategy (use performance for DGX Spark 128GB with SGLang)
VRAM_CONSERVATIVE_MODE=false  # false = trust keep_alive (128GB) | true = force-unload after each request (16GB)
VRAM_PROFILE=performance

# Circuit Breaker Settings (prevent crash loops)
VRAM_CIRCUIT_BREAKER_ENABLED=true
VRAM_CIRCUIT_BREAKER_THRESHOLD=2
VRAM_CIRCUIT_BREAKER_WINDOW_SECONDS=300
VRAM_CIRCUIT_BREAKER_BUFFER_GB=20.0

# Queue
MAX_QUEUE_SIZE=50
MAX_RETRIES=3

# Maintenance
MAINTENANCE_MODE=false
MAINTENANCE_MODE_HARD=false

# Discord Bot (required)
# IMPORTANT: Do NOT export DISCORD_TOKEN in your shell!
# Shell environment variables override .env file values.
# If you get "401 Unauthorized" errors, check: printenv | grep DISCORD_TOKEN
DISCORD_TOKEN=your_discord_bot_token_here
FASTAPI_WS_URL=ws://fastapi-service:8000/ws/discord

# Discord Bot Admin Settings
BOT_SECRET=generate-32-byte-random-key-for-jwt-signing
# To generate BOT_SECRET: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
# BOT_SECRET is used for:
#   1. Discord admin JWT signing
#   2. WebSocket HMAC authentication (discord-bot → troise-ai)
ADMIN_ROLE_IDS=1234567890123456789,9876543210987654321  # Comma-separated Discord role IDs with admin access
# To find role IDs: Server Settings → Roles → Right-click role → Copy ID (requires Developer Mode)

# WebSocket Authentication (troise-ai)
DISABLE_WS_AUTH=false  # Set to 'true' to disable WebSocket auth (development only)

# Log Configuration
LOG_RETENTION_DAYS=2              # Delete logs older than 2 days
LOG_CLEANUP_INTERVAL_HOURS=6      # Run cleanup every 6 hours
LOG_MAX_BYTES=10485760            # 10MB per log file (before rotation)
LOG_BACKUP_COUNT=5                # Keep 5 rotated files per log type
LOG_BASE_DIR=/app/logs            # Base directory for log storage

# Monitoring Configuration (admin-service)
HEALTH_CHECK_INTERVAL_SECONDS=5           # Check service health every 5 seconds
HEALTH_CHECK_ALERT_THRESHOLD=3            # Alert after 3 consecutive failures
HEALTH_CHECK_ALERT_COOLDOWN_SECONDS=300   # 5 minutes between alerts for same service

# Metrics Configuration (admin-service)
METRICS_WRITE_INTERVAL_SECONDS=5          # Write metrics to DynamoDB every 5 seconds
METRICS_RETENTION_DAYS=2                  # DynamoDB TTL for metrics (2 days)
