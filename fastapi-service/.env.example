# Application
DEBUG=false
APP_NAME="Discord-Trollama Agent"
VERSION="0.1.0"

# Server
HOST=0.0.0.0
PORT=8000

# Internal API Key (for admin-service to access internal endpoints)
INTERNAL_API_KEY=generate-64-byte-random-key-for-service-to-service-auth
# To generate: python3 -c "import secrets; print(secrets.token_urlsafe(48))"

# DynamoDB Local
DYNAMODB_ENDPOINT=http://dynamodb-local:8000
DYNAMODB_REGION=us-east-1
DYNAMODB_ACCESS_KEY=fake
DYNAMODB_SECRET_KEY=fake

# Ollama
OLLAMA_HOST=http://host.docker.internal:11434
OLLAMA_DEFAULT_MODEL=gpt-oss:20b
OLLAMA_SUMMARIZATION_MODEL=gpt-oss:20b
OLLAMA_REQUEST_TIMEOUT=300

# Queue Settings
MAX_QUEUE_SIZE=50
QUEUE_TIMEOUT_SECONDS=300
VISIBILITY_TIMEOUT=300
MAX_RETRIES=3
RETRY_DELAY=5

# Token Settings
MAX_CONTEXT_TOKENS=10000
DEFAULT_SUMMARIZATION_THRESHOLD=9000
FREE_TIER_WEEKLY_BUDGET=100000
ADMIN_TIER_WEEKLY_BUDGET=500000

# Discord
DISCORD_MESSAGE_MAX_LENGTH=2000
DISCORD_SPLIT_MESSAGE_INDICATOR=true

# Maintenance
MAINTENANCE_MODE=false
MAINTENANCE_MODE_HARD=false
MAINTENANCE_MESSAGE="ðŸ”§ Bot is under maintenance. Your request has been queued."
MAINTENANCE_MESSAGE_HARD="ðŸš« Bot is under emergency maintenance. Please try again later."

# Available Models (comma-separated)
AVAILABLE_MODELS=gpt-oss:20b,qwen2.5-coder:7b

# Health Check
HEALTH_CHECK_INTERVAL=30

# Strands File Tools Configuration
# Auto-approve file_write operations (no user confirmation prompts)
# Set to true for Discord bot to enable seamless artifact creation
BYPASS_TOOL_CONSENT=true

# ============================================================================
# VRAM Configuration Profiles
# ============================================================================
# Configuration Profile - Environment-aware model roster and VRAM limits
# Options: "conservative" (16-32GB), "performance" (128GB, SGLang), "balanced" (128GB, Ollama)
VRAM_PROFILE=performance

# VRAM Orchestrator - Production memory management for unified memory systems
# Enable orchestrator for automatic model loading/unloading and OOM prevention
VRAM_ENABLE_ORCHESTRATOR=true

# Legacy: Conservative mode (force-unload after each request)
# Keep false for high-memory systems (128GB), set true for 16GB systems if not using profiles
VRAM_CONSERVATIVE_MODE=false

# PSI-Based Proactive Eviction (prevents earlyoom kills)
# PSI (Pressure Stall Information) is a Linux kernel metric for memory pressure
VRAM_PSI_WARNING_THRESHOLD=10.0   # PSI full_avg10 > 10% - evict LOW priority models
VRAM_PSI_CRITICAL_THRESHOLD=15.0  # PSI full_avg10 > 15% - evict NORMAL priority models

# Circuit Breaker (prevents crash loops)
VRAM_CIRCUIT_BREAKER_ENABLED=true        # Enable circuit breaker pattern
VRAM_CRASH_THRESHOLD=2                   # Number of crashes to trigger protection
VRAM_CRASH_WINDOW_SECONDS=300            # Time window for crash tracking (5 minutes)
VRAM_CIRCUIT_BREAKER_BUFFER_GB=20.0      # Extra safety buffer when circuit breaker triggers
